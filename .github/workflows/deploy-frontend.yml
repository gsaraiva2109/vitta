name: Deploy Frontend

on:
  push:
    paths:
      - 'frontend/**' # Dispara apenas quando arquivos na pasta `frontend` s√£o alterados.

jobs:
  deploy:
    name: Trigger Frontend Deploy via Webhook
    runs-on: ubuntu-latest

    steps:
      - name: Trigger Frontend Deploy
        env:
          COOLIFY_TOKEN: ${{ secrets.COOLIFY_TOKEN }} # Token de autentica√ß√£o
          FRONTEND_WEBHOOK_URL: ${{ secrets.COOLIFY_FRONTEND_WEBHOOK_URL }} # URL do webhook para frontend
        run: |
          echo "üöÄ Triggering Frontend Deploy Webhook..."
          
          RESPONSE=$(curl -X POST -s -o response.txt -w "%{http_code}" \
            -H "Authorization: Bearer $COOLIFY_TOKEN" \
            "$FRONTEND_WEBHOOK_URL" -d "{}")
          
          if [ $RESPONSE -eq 200 ]; then
            echo "‚úÖ Frontend Deploy Triggered Successfully!"
          else
            echo "‚ùå Error Triggering Frontend Deploy!"
            cat response.txt
            exit 1
          fi